# luaAssignment

Andra LUNGU

		Adobe Assignment: Tesing a public JSON API using Lua

-- Sentiment API [http://www.alchemyapi.com/api/sentiment/textc.html]

The Sentiment API is a means of extracting positive, negative or neutral feelings from a given text. 
It was built by AlchemyAPI, an IBM company. The text is uploaded (POSTed) to the server, which detects 
the language used and automatically extracts the sentiment.

The API offers two main methods (calls): TextGetTextSentiment, TextGetTargetedSentiment. The main difference
between the two calls is that the latter (TextGetTargetedSentiment) extracts sentiments directed towards a 
user-defined phrase or a set of phrases. 

The first step towards calling the API is obtaining a private API key via http://www.alchemyapi.com/api/register.html.
The key is then appended to the endpoint URL, followed by an URI-encoded text and the outputMode, which in this case 
is JSON(e.g. http://gateway-a.watsonplatform.net/calls/text/TextGetTextSentiment?apikey=49e910d612035b3f2db73c49a7b6e6a35e27045c
        &text=All%20our%20knowledge%20begins%20with%20the%20senses%2C%20proceeds%20then%20to%20the%20understanding%2C%20and%20ends%20with%20reason       
        &outputMode=json)

To make sure the text is in a URI-encoded format, the following decoder was used: http://meyerweb.com/eric/tools/dencoder/.

The response received has the following format:
{
    "status": "OK",
    "usage": "By accessing AlchemyAPI or using information generated by AlchemyAPI, 
	you are agreeing to be bound by the AlchemyAPI Terms of Use: http://www.alchemyapi.com/company/terms.html",
    "totalTransactions": "1",
    "language": "english",
    "docSentiment": {
        "type": "neutral"
    }
}


Lunit Testcase

When testing, after issuing a request, one needs to specify the location where the response will be written. This can be 
at stdout, in a file, in a table, etc. I chose storing the output in a table to be able to extract information from it later. 
To this end, I used the ltn12.sink.table() method call. This creates a sink and stores all chunks in a table. The table is then 
decoded from json to simple lua table format. Then, I check whether various parameters are equal to the expected values. 
For instance, a text such as "happy" should yield a positive type in the docSentiment section. 

Various functionalities are tested such as the status, invalid api keys, language, types etc. The test suite is not exhaustive 
due to lack of time and because that was not the purpose of this exercise. 

Travis integration [https://travis-ci.org/andralungu/]
luaAssignment project

I basically followed the steps described here: https://blog.separateconcerns.com/2015-03-08-travis-lua.html. I added a .travis
folder and a travis.yml with the corresponding lines for installing various libs.

Then I registered the git repo to Travis and the next push triggered a new build. 

----------------------------------------------------------------------------------------------------
OS Type: GNU Linux [Mint]
IntelliJ version: 14.1.5 Ultimate
lua version: 5.1.5 
luaRocks version: 2.2.2-1
liblua version: 5.1-0-dev
lunit version: 0.5-2
